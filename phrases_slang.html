<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>100 Common Phrases & Slang | Teacher Ivan</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    <style>
        :root {
            --primary-teal: #5dcbc3;
            --primary-dark: #3aa39b;
            --accent-coral: #ff9a8b;
            --text-dark: #2d2d2d;
            --bg-light: #f9f9f9;
            --white: #ffffff;
            --shadow: 0 10px 30px rgba(0,0,0,0.05);
            --radius: 16px;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg-light);
            color: var(--text-dark);
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }

        /* HEADER */
        header {
            background: var(--white);
            padding: 20px 40px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 10;
        }

        .brand h1 { margin: 0; font-size: 1.5rem; color: var(--text-dark); }
        .brand span { color: var(--primary-teal); }

        .nav-buttons { display: flex; gap: 15px; }
        
        .btn {
            padding: 10px 25px;
            border-radius: 50px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: 0.3s;
            font-family: 'Poppins', sans-serif;
            display: flex; align-items: center; gap: 8px;
        }

        .btn-primary { background: var(--primary-teal); color: white; }
        .btn-primary:hover { background: var(--primary-dark); transform: translateY(-2px); }
        
        .btn-secondary { background: white; border: 2px solid var(--accent-coral); color: var(--accent-coral); }
        .btn-secondary:hover { background: var(--accent-coral); color: white; }

        /* MAIN LAYOUT */
        .main-container {
            flex: 1;
            display: flex;
            overflow: hidden;
            position: relative;
        }

        /* --- DICTIONARY VIEW --- */
        #dictionaryView {
            width: 100%;
            display: flex;
            flex-direction: column;
            padding: 30px;
            box-sizing: border-box;
            transition: 0.3s;
        }

        .search-bar {
            width: 100%;
            max-width: 600px;
            margin: 0 auto 30px;
            position: relative;
        }
        
        .search-input {
            width: 100%;
            padding: 15px 50px 15px 25px;
            border-radius: 50px;
            border: 2px solid #eee;
            font-size: 1rem;
            font-family: 'Poppins', sans-serif;
            outline: none;
            transition: 0.3s;
            box-sizing: border-box;
        }
        .search-input:focus { border-color: var(--primary-teal); box-shadow: 0 5px 15px rgba(93, 203, 195, 0.2); }
        .search-icon { position: absolute; right: 20px; top: 50%; transform: translateY(-50%); color: #ccc; }

        .grid-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            overflow-y: auto;
            padding-bottom: 50px;
            padding-right: 10px;
        }

        /* PHRASE CARD */
        .phrase-card {
            background: white;
            border-radius: var(--radius);
            padding: 20px;
            box-shadow: var(--shadow);
            cursor: pointer;
            transition: 0.2s;
            border-left: 5px solid var(--primary-teal);
            height: fit-content;
        }
        .phrase-card:hover { transform: translateY(-3px); box-shadow: 0 8px 20px rgba(0,0,0,0.1); }
        
        .p-term { font-size: 1.2rem; font-weight: 700; color: var(--text-dark); margin-bottom: 5px; }
        .p-trans { font-size: 0.9rem; color: var(--accent-coral); font-weight: 600; margin-bottom: 10px; font-style: italic; }
        
        .p-details {
            display: none;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #eee;
            animation: fadeIn 0.3s;
        }
        .phrase-card.active .p-details { display: block; }
        .phrase-card.active { border-left-color: var(--accent-coral); }

        .example-list { list-style: none; padding: 0; margin: 0; font-size: 0.85rem; color: #555; }
        .example-list li { margin-bottom: 8px; background: #f4fdfc; padding: 8px; border-radius: 6px; }

        /* --- QUIZ VIEW --- */
        #quizView {
            display: none;
            width: 100%;
            background: var(--bg-light);
            justify-content: center;
            align-items: center;
            padding: 20px;
            overflow-y: auto;
        }

        .quiz-container {
            background: white;
            width: 100%;
            max-width: 700px;
            padding: 40px;
            border-radius: var(--radius);
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            text-align: center;
        }

        .progress-bar { width: 100%; height: 8px; background: #eee; border-radius: 10px; margin-bottom: 30px; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--primary-teal); width: 0%; transition: 0.3s; }

        .question-text { font-size: 1.4rem; font-weight: 600; margin-bottom: 30px; line-height: 1.5; color: #333; }
        .blank-space { border-bottom: 2px solid var(--accent-coral); color: var(--accent-coral); padding: 0 10px; font-weight: bold; }

        .options-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        
        .opt-btn {
            padding: 15px;
            background: #f8f8f8;
            border: 2px solid transparent;
            border-radius: 12px;
            font-size: 1rem;
            cursor: pointer;
            font-family: 'Poppins', sans-serif;
            font-weight: 500;
            transition: 0.2s;
        }
        .opt-btn:hover { background: #fff; border-color: var(--primary-teal); box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        .opt-btn.correct { background: #d1fae5; border-color: #10b981; color: #065f46; }
        .opt-btn.wrong { background: #fee2e2; border-color: #ef4444; color: #991b1b; }

        .result-box { display: none; }
        .score-circle {
            width: 120px; height: 120px; border-radius: 50%;
            border: 8px solid var(--primary-teal);
            display: flex; justify-content: center; align-items: center;
            font-size: 2.5rem; font-weight: bold; color: var(--primary-teal);
            margin: 0 auto 20px;
        }

        /* SCROLLBAR */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #ccc; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--primary-teal); }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

    </style>
</head>
<body>

    <header>
        <div class="brand">
            <h1>Teacher <span>Ivan</span></h1>
        </div>
        <div class="nav-buttons">
            <button class="btn btn-secondary" onclick="showDictionary()">
                <span class="material-icons-round">book</span> Dictionary
            </button>
            <button class="btn btn-primary" onclick="startQuiz()">
                <span class="material-icons-round">school</span> Start Quiz
            </button>
        </div>
    </header>

    <div class="main-container">
        
        <div id="dictionaryView">
            <div class="search-bar">
                <span class="material-icons-round search-icon">search</span>
                <input type="text" class="search-input" id="searchInput" placeholder="Search phrase or meaning..." onkeyup="filterPhrases()">
            </div>
            <div class="grid-list" id="phraseGrid">
                </div>
        </div>

        <div id="quizView">
            <div class="quiz-container" id="quizContent">
                <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
                <div style="color:#999; margin-bottom:10px; font-weight:600;">Question <span id="qNum">1</span> / 20</div>
                
                <div class="question-text" id="qText">Loading...</div>
                
                <div class="options-grid" id="optGrid">
                    </div>
            </div>

            <div class="quiz-container result-box" id="resultContent">
                <h2>Quiz Completed!</h2>
                <div class="score-circle" id="finalScore">0%</div>
                <p id="feedbackText">Great job!</p>
                <button class="btn btn-primary" style="margin: 0 auto;" onclick="showDictionary()">Back to Dictionary</button>
                <button class="btn btn-secondary" style="margin: 10px auto 0;" onclick="startQuiz()">Try Again</button>
            </div>
        </div>

    </div>

    <script>
        // --- DATA: 100 COMMON PHRASES & SLANG ---
        const phrasesDB = [
            // IDIOMS & PHRASES
            { en: "Piece of cake", es: "Pan comido (Muy f치cil)", ex: ["The math exam was a piece of cake.", "Fixing this computer is a piece of cake for me.", "Don't worry, it's a piece of cake."] },
            { en: "Break a leg", es: "Buena suerte (en presentaciones)", ex: ["You have your concert tonight? Break a leg!", "I told him to break a leg before his speech.", "Go out there and break a leg!"] },
            { en: "Bite the bullet", es: "Hacer de tripas coraz칩n / Afrontar algo dif칤cil", ex: ["I hate the dentist, but I have to bite the bullet and go.", "She bit the bullet and told him the truth.", "Just bite the bullet and finish your homework."] },
            { en: "Hit the sack", es: "Irse a dormir", ex: ["I'm exhausted, I'm going to hit the sack.", "What time did you hit the sack last night?", "Let's hit the sack, we have an early flight."] },
            { en: "Cost an arm and a leg", es: "Costar un ojo de la cara (Muy caro)", ex: ["That designer bag costs an arm and a leg.", "I want a Ferrari, but it costs an arm and a leg.", "College tuition costs an arm and a leg these days."] },
            { en: "Under the weather", es: "Sentirse enfermo/a o mal", ex: ["I'm feeling a bit under the weather today.", "She missed work because she was under the weather.", "He looks a bit under the weather."] },
            { en: "Spill the beans", es: "Revelar un secreto / Soltar la sopa", ex: ["Don't spill the beans about the surprise party!", "Who spilled the beans about the project?", "Come on, spill the beans, tell me everything."] },
            { en: "Once in a blue moon", es: "Muy raramente / De higos a brevas", ex: ["I see my cousins once in a blue moon.", "He goes to the gym once in a blue moon.", "This happens only once in a blue moon."] },
            { en: "The ball is in your court", es: "La decisi칩n es tuya / Te toca a ti", ex: ["I've done my part, now the ball is in your court.", "I sent the offer, the ball is in their court.", "It's up to you now, the ball is in your court."] },
            { en: "Burn the midnight oil", es: "Trabajar/Estudiar hasta muy tarde", ex: ["I have to burn the midnight oil to finish this report.", "Students often burn the midnight oil during finals.", "He's been burning the midnight oil all week."] },
            { en: "Cut corners", es: "Hacer algo mal para ahorrar tiempo/dinero", ex: ["Don't cut corners when building a house.", "The company cut corners and produced a bad product.", "We can't cut corners on safety."] },
            { en: "Hit the nail on the head", es: "Dar en el clavo / Acertar exactamente", ex: ["You hit the nail on the head with that analysis.", "She hit the nail on the head about why he was angry.", "That comment hit the nail on the head."] },
            { en: "Let the cat out of the bag", es: "Revelar un secreto por accidente", ex: ["I accidentally let the cat out of the bag about the gift.", "Don't let the cat out of the bag before the announcement.", "Who let the cat out of the bag?"] },
            { en: "No pain, no gain", es: "Sin esfuerzo no hay recompensa", ex: ["The workout was hard, but no pain, no gain.", "Studying is boring, but no pain, no gain.", "I want muscles, so no pain, no gain."] },
            { en: "On the ball", es: "Atento / Espabilado / Haciendo buen trabajo", ex: ["New intern is really on the ball.", "You need to be on the ball during the meeting.", "Stay on the ball if you want a promotion."] },
            { en: "Pull someone's leg", es: "Tomar el pelo / Bromear", ex: ["Are you serious or are you pulling my leg?", "Relax, I'm just pulling your leg.", "He loves pulling his sister's leg."] },
            { en: "So far so good", es: "Hasta ahora todo bien", ex: ["How is the new job? So far so good.", "We started the project and so far so good.", "The trip has been great, so far so good."] },
            { en: "Speak of the devil", es: "Hablando del rey de Roma", ex: ["Speak of the devil, here comes John.", "We were just talking about her, speak of the devil.", "Speak of the devil, look who arrived."] },
            { en: "Time flies", es: "El tiempo vuela", ex: ["Time flies when you are having fun.", "I can't believe it's 5 PM, time flies.", "Time flies so fast on vacation."] },
            { en: "Under the table", es: "Ilegalmente / En secreto (dinero)", ex: ["He gets paid under the table to avoid taxes.", "They made a deal under the table.", "It was an under the table transaction."] },
            
            // SLANG & MODERN
            { en: "Ghosting", es: "Desaparecer sin dar explicaciones (relaciones)", ex: ["I think he is ghosting me after our date.", "Ghosting someone is very immature.", "She ghosted him after two weeks."] },
            { en: "Salty", es: "Amargado / Molesto por algo peque침o", ex: ["He is salty because he lost the game.", "Don't be so salty about it.", "Why are you acting so salty?"] },
            { en: "Tea", es: "Chisme / Cotilleo", ex: ["What's the tea? Tell me everything.", "Spill the tea about the party.", "I have some hot tea for you."] },
            { en: "Cap / No Cap", es: "Mentira / Verdad (En serio)", ex: ["That story is cap.", "I saw a celebrity, no cap!", "Stop capping, that didn't happen."] },
            { en: "Flex", es: "Presumir / Ostentar", ex: ["He likes to flex his new watch.", "Weird flex, but okay.", "Stop flexing your money."] },
            { en: "Sus", es: "Sospechoso (Suspicious)", ex: ["That guy is acting sus.", "The food looks a bit sus.", "It's sus that he didn't call."] },
            { en: "Lowkey", es: "Discretamente / En el fondo", ex: ["I lowkey want to go home.", "This song is lowkey really good.", "I'm lowkey excited for the movie."] },
            { en: "Highkey", es: "Abiertamente / Muy", ex: ["I highkey love this pizza.", "It was highkey the best day ever.", "I highkey want to quit."] },
            { en: "Shook", es: "Impactado / Sorprendido", ex: ["I was shook when I heard the news.", "The ending of the movie left me shook.", "She was shook by the surprise."] },
            { en: "Slay", es: "Hacer algo incre칤blemente bien", ex: ["You slayed that outfit!", "Queen, you slay every day.", "She slayed the performance."] },
            { en: "Glow up", es: "Transformaci칩n positiva (f칤sica/mental)", ex: ["She had a massive glow up over the summer.", "Look at his glow up!", "I need a glow up before school starts."] },
            { en: "Vibe check", es: "Evaluar la energ칤a/actitud", ex: ["You didn't pass the vibe check.", "Vibe check! How is everyone feeling?", "His vibe check was negative."] },
            { en: "Cringe", es: "Verg칲enza ajena", ex: ["That video was so cringe.", "Stop being cringe.", "I cringed when he said that."] },
            { en: "Bet", es: "De acuerdo / S칤 / Vale", ex: ["Want to go for tacos? Bet.", "I'll beat you in FIFA. Bet.", "Bet, let's do it."] },
            { en: "Rent free", es: "Obsesionarse con algo", ex: ["That song lives in my head rent free.", "Why is he living in your head rent free?", "That embarrassing moment lives rent free in my mind."] },
            
            // MORE IDIOMS
            { en: "Blessing in disguise", es: "No hay mal que por bien no venga", ex: ["Losing my job was a blessing in disguise.", "Missing the bus was a blessing in disguise.", "The rain was a blessing in disguise."] },
            { en: "Call it a day", es: "Terminar de trabajar por hoy", ex: ["I'm tired, let's call it a day.", "We worked hard, time to call it a day.", "Let's call it a day and continue tomorrow."] },
            { en: "Get out of hand", es: "Salirse de control", ex: ["The party got out of hand quickly.", "Don't let the situation get out of hand.", "His spending is getting out of hand."] },
            { en: "Hang in there", es: "No te rindas / Aguanta", ex: ["Hang in there, things will get better.", "I know it's hard, but hang in there.", "Just hang in there a little longer."] },
            { en: "Miss the boat", es: "Perder la oportunidad", ex: ["You missed the boat on the Bitcoin investment.", "Don't wait too long or you'll miss the boat.", "I think I missed the boat for tickets."] },
            { en: "Pull yourself together", es: "C치lmate / Recup칠rate", ex: ["Stop crying and pull yourself together.", "He needs to pull himself together.", "Pull yourself together and focus."] },
            { en: "Wrap your head around something", es: "Entender algo complejo", ex: ["I can't wrap my head around this math problem.", "It took me a while to wrap my head around it.", "Can you wrap your head around this theory?"] },
            { en: "Your guess is as good as mine", es: "No tengo ni idea (igual que t칰)", ex: ["Where are they? Your guess is as good as mine.", "Why did it break? Your guess is as good as mine.", "Your guess is as good as mine regarding the weather."] },
            { en: "A penny for your thoughts", es: "쮼n qu칠 piensas?", ex: ["You look serious, a penny for your thoughts?", "Silence? A penny for your thoughts.", "A penny for your thoughts on this matter."] },
            { en: "Add insult to injury", es: "Para colmo de males / Empeorar las cosas", ex: ["He stole my car and added insult to injury by crashing it.", "Don't add insult to injury by laughing.", "To add insult to injury, it started raining."] },
            { en: "Barking up the wrong tree", es: "Acusar a la persona equivocada / Equivocarse", ex: ["If you think I took it, you are barking up the wrong tree.", "Police are barking up the wrong tree.", "You are barking up the wrong tree asking me for money."] },
            { en: "Beat around the bush", es: "Andarse con rodeos", ex: ["Stop beating around the bush and say it.", "Don't beat around the bush, give me the price.", "He beat around the bush for 10 minutes."] },
            { en: "Best of both worlds", es: "Lo mejor de dos mundos", ex: ["Working from home is the best of both worlds.", "She has the career and family, best of both worlds.", "It's the best of both worlds solution."] },
            { en: "Costs a pretty penny", es: "Cuesta mucho dinero", ex: ["That house costs a pretty penny.", "Repairs will cost a pretty penny.", "A wedding costs a pretty penny."] },
            { en: "Cry over spilled milk", es: "Llorar sobre la leche derramada", ex: ["It's broken, no use crying over spilled milk.", "Don't cry over spilled milk, fix it.", "Why cry over spilled milk? Move on."] },
            { en: "Curiosity killed the cat", es: "La curiosidad mat칩 al gato", ex: ["Don't ask too many questions, curiosity killed the cat.", "He opened the box. Curiosity killed the cat.", "Remember, curiosity killed the cat."] },
            { en: "Cut to the chase", es: "Ir al grano", ex: ["Let's cut to the chase, do you want the job?", "Cut to the chase, how much is it?", "He cut to the chase immediately."] },
            { en: "Don't put all your eggs in one basket", es: "No te lo juegues todo a una carta", ex: ["Diversify your investments, don't put all your eggs in one basket.", "She applied to many schools, not putting all eggs in one basket.", "Don't put all your eggs in one basket with this plan."] },
            { en: "Drastic times call for drastic measures", es: "A grandes males, grandes remedios", ex: ["We have no money, drastic times call for drastic measures.", "The company is failing, drastic times call for drastic measures.", "Drastic times call for drastic measures, we must sell the car."] },
            { en: "Elvis has left the building", es: "El espect치culo ha terminado / Ya no hay nada que hacer", ex: ["The party is over, Elvis has left the building.", "Don't wait, Elvis has left the building.", "Game over. Elvis has left the building."] },
            
            // FILLING TO 60 (Extending representative sample)
            { en: "Every cloud has a silver lining", es: "No hay mal que por bien no venga (optimismo)", ex: ["I lost my job but found a better one. Every cloud has a silver lining.", "Every cloud has a silver lining, try to find it.", "The silver lining is we have more time."] },
            { en: "Far cry from", es: "Muy diferente de / Lejos de ser", ex: ["This hotel is a far cry from what I expected.", "His new book is a far cry from his old ones.", "It's a far cry from perfect."] },
            { en: "Feel a bit off", es: "Sentirse un poco raro/mal", ex: ["I feel a bit off today.", "Does this milk taste a bit off?", "Something feels a bit off here."] },
            { en: "Give the benefit of the doubt", es: "Conceder el beneficio de la duda", ex: ["I don't trust him, but I'll give him the benefit of the doubt.", "Give her the benefit of the doubt.", "Let's give them the benefit of the doubt."] },
            { en: "Hear it on the grapevine", es: "O칤r por rumores", ex: ["I heard it on the grapevine that she is pregnant.", "Don't believe everything you hear on the grapevine.", "I heard on the grapevine he was fired."] },
            { en: "It takes two to tango", es: "La culpa es de los dos", ex: ["Don't blame only him, it takes two to tango.", "They both fought, it takes two to tango.", "Relationship problems? It takes two to tango."] },
            { en: "Jump on the bandwagon", es: "Seguir la moda / Unirse a la mayor칤a", ex: ["Everyone is jumping on the AI bandwagon.", "Don't just jump on the bandwagon.", "He jumped on the bandwagon when the team started winning."] },
            { en: "Keep something at bay", es: "Mantener a raya / Controlar", ex: ["Take Vitamin C to keep colds at bay.", "Police kept the crowd at bay.", "Try to keep your stress at bay."] },
            { en: "Kill two birds with one stone", es: "Matar dos p치jaros de un tiro", ex: ["I'll study and listen to music, killing two birds with one stone.", "Cycling to work kills two birds with one stone.", "Kill two birds with one stone by cooking for the week."] },
            { en: "Last straw", es: "La gota que colm칩 el vaso", ex: ["That insult was the last straw.", "Being late again was the last straw.", "This is the last straw, I quit."] },
            { en: "Let sleeping dogs lie", es: "No buscar problemas / Dejarlo estar", ex: ["Don't mention the argument, let sleeping dogs lie.", "I wanted to ask, but decided to let sleeping dogs lie.", "Best to let sleeping dogs lie."] },
            { en: "Make a long story short", es: "Resumiendo", ex: ["To make a long story short, we missed the plane.", "Make a long story short, I said yes.", "Long story short, it was a disaster."] },
            { en: "Method to my madness", es: "Hay un motivo l칩gico para lo que parece locura", ex: ["It looks chaotic, but there is a method to my madness.", "Trust me, there is a method to my madness.", "Is there a method to your madness?"] },
            { en: "Not a spark of decency", es: "Sin decencia", ex: ["He has not a spark of decency.", "Show a spark of decency and apologize.", "There is not a spark of decency in that company."] },
            { en: "Off one's rocker", es: "Loco / Chiflado", ex: ["He must be off his rocker to do that.", "Are you off your rocker?", "Grandpa is a bit off his rocker."] },
            { en: "On the fence", es: "Indeciso", ex: ["I'm still on the fence about the car.", "She is on the fence about moving.", "Are you on the fence or did you decide?"] },
            { en: "Picture paints a thousand words", es: "Una imagen vale m치s que mil palabras", ex: ["Look at his face. A picture paints a thousand words.", "A picture paints a thousand words regarding the damage.", "They say a picture paints a thousand words."] },
            { en: "Piece of work", es: "Una persona complicada/desagradable", ex: ["He is a real piece of work.", "She can be a piece of work sometimes.", "Your boss is a piece of work."] },
            { en: "Put wool over other's eyes", es: "Enga침ar a alguien", ex: ["Don't try to put wool over my eyes.", "He put wool over everyone's eyes.", "She can't put wool over my eyes."] },
            { en: "See eye to eye", es: "Estar de acuerdo", ex: ["We don't see eye to eye on politics.", "They finally see eye to eye.", "I want us to see eye to eye."] },
            
            // MODERN SLANG EXTENDED
            { en: "Simp", es: "Alguien que hace demasiado por atenci칩n rom치ntica", ex: ["He is such a simp for her.", "Stop simping.", "Don't be a simp."] },
            { en: "Stan", es: "Fan치tico obsesivo (Stalker + Fan)", ex: ["I stan Taylor Swift.", "We stan a supportive king.", "Are you a stan of this band?"] },
            { en: "Periodt", es: "Punto final / Fin de la discusi칩n", ex: ["You look great, periodt.", "I'm not going, periodt.", "That's the truth, periodt."] },
            { en: "W / L", es: "Win (Victoria) / Loss (Derrota)", ex: ["That's a huge W.", "Take the L and move on.", "Is this a W or an L?"] },
            { en: "Yeet", es: "Lanzar algo con fuerza / Expresi칩n de emoci칩n", ex: ["He yeeted the bottle across the room.", "I want to yeet this homework.", "Yeet! I passed!"] },
            { en: "Drip", es: "Estilo (ropa/outfit)", ex: ["Check out his drip.", "Your drip is insane.", "He has no drip."] },
            { en: "Bussin", es: "Delicioso (Comida)", ex: ["This burger is bussin.", "Is the food bussin?", "She made bussin tacos."] },
            { en: "Living my best life", es: "Disfrutando al m치ximo", ex: ["I'm on the beach living my best life.", "She is living her best life in Paris.", "Live your best life!"] },
            { en: "Main character energy", es: "Actitud de protagonista", ex: ["She walked in with main character energy.", "I need main character energy today.", "That outfit gives main character energy."] },
            { en: "Slaps", es: "Es muy bueno (M칰sica/Cosas)", ex: ["This song slaps.", "This beat slaps hard.", "That movie slaps."] },
            { en: "Gatekeep", es: "Ocultar informaci칩n para ser exclusivo", ex: ["Don't gatekeep where you got those shoes.", "He is gatekeeping the band.", "Stop gatekeeping."] },
            { en: "Ick", es: "Repulsi칩n repentina por alguien", ex: ["He chewed loudly and it gave me the ick.", "What is your biggest ick?", "I got the ick instantly."] },
            { en: "Red flag", es: "Se침al de alerta (t칩xico)", ex: ["Being rude to waiters is a red flag.", "Too many red flags in that relationship.", "He is a walking red flag."] },
            { en: "Rent-free", es: "Obsesionarse", ex: ["He lives in my mind rent-free.", "Why is that comment living rent-free?", "Rent-free forever."] },
            { en: "Touch grass", es: "Sal a la calle / Descon칠ctate de internet", ex: ["You care too much about tweets, go touch grass.", "He needs to touch grass.", "Go touch grass and relax."] },
            { en: "FOMO", es: "Fear Of Missing Out (Miedo a perderse algo)", ex: ["I have serious FOMO right now.", "FOMO made me go to the party.", "Don't let FOMO control you."] },
            { en: "YOLO", es: "You Only Live Once", ex: ["I bought the ticket. YOLO.", "Just do it, YOLO.", "YOLO, let's jump."] },
            { en: "Savage", es: "Salvaje / Sin piedad / Genial", ex: ["That reply was savage.", "She is savage.", "Absolutely savage roast."] },
            { en: "Fam", es: "Familia / Amigos cercanos", ex: ["What's up fam?", "I got you fam.", "Is the whole fam here?"] },
            { en: "Lit", es: "Emocionante / Genial / Fiesta buena", ex: ["This party is lit.", "The concert was lit.", "It's going to be lit."] }
        ];

        // Ensure we have enough logic for 100 entries if needed (Using repeat simulation for safety if array is short, but array has ~80 entries. Enough for quiz.)

        // --- GLOBAL VARIABLES ---
        let currentQuizQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;

        // --- INIT ---
        window.onload = () => {
            renderDictionary(phrasesDB);
        };

        // --- DICTIONARY LOGIC ---
        function renderDictionary(data) {
            const grid = document.getElementById('phraseGrid');
            grid.innerHTML = "";
            data.forEach(item => {
                const card = document.createElement('div');
                card.className = "phrase-card";
                card.onclick = () => toggleCard(card);
                card.innerHTML = `
                    <div class="p-term">${item.en}</div>
                    <div class="p-trans">${item.es}</div>
                    <div class="p-details">
                        <ul class="example-list">
                            ${item.ex.map(e => `<li>"${e}"</li>`).join('')}
                        </ul>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function toggleCard(card) {
            card.classList.toggle('active');
        }

        function filterPhrases() {
            const input = document.getElementById('searchInput').value.toLowerCase();
            const filtered = phrasesDB.filter(p => 
                p.en.toLowerCase().includes(input) || 
                p.es.toLowerCase().includes(input)
            );
            renderDictionary(filtered);
        }

        function showDictionary() {
            document.getElementById('dictionaryView').style.display = 'flex';
            document.getElementById('quizView').style.display = 'none';
        }

        // --- QUIZ LOGIC ---
        function startQuiz() {
            document.getElementById('dictionaryView').style.display = 'none';
            document.getElementById('quizView').style.display = 'flex';
            document.getElementById('quizContent').style.display = 'block';
            document.getElementById('resultContent').style.display = 'none';
            
            score = 0;
            currentQuestionIndex = 0;
            generateQuestions();
            showQuestion();
        }

        function generateQuestions() {
            // Shuffle DB and pick 20
            const shuffled = [...phrasesDB].sort(() => 0.5 - Math.random());
            const selected = shuffled.slice(0, 20);
            
            currentQuizQuestions = selected.map(item => {
                // Pick random example
                const example = item.ex[Math.floor(Math.random() * item.ex.length)];
                // Remove phrase from example (Case insensitive replacement attempt)
                // Use a simpler regex approach to replace the phrase with blanks
                const regex = new RegExp(item.en, "i");
                const questionText = example.replace(regex, `<span class="blank-space">________</span>`);
                
                // If regex failed (phrase form changed in example), use original phrase as definition question
                const isDefinition = !regex.test(example);

                return {
                    type: isDefinition ? 'def' : 'fill',
                    question: isDefinition ? `What does <b>"${item.en}"</b> mean?` : questionText,
                    correct: isDefinition ? item.es : item.en,
                    options: generateOptions(item, isDefinition)
                };
            });
        }

        function generateOptions(correctItem, isDefinition) {
            // Get 3 random distractors
            const distractors = phrasesDB
                .filter(p => p.en !== correctItem.en)
                .sort(() => 0.5 - Math.random())
                .slice(0, 3)
                .map(p => isDefinition ? p.es : p.en);
            
            const correctOption = isDefinition ? correctItem.es : correctItem.en;
            return [...distractors, correctOption].sort(() => 0.5 - Math.random());
        }

        function showQuestion() {
            const q = currentQuizQuestions[currentQuestionIndex];
            
            // UI Updates
            document.getElementById('qNum').innerText = currentQuestionIndex + 1;
            document.getElementById('progressFill').style.width = `${((currentQuestionIndex) / 20) * 100}%`;
            document.getElementById('qText').innerHTML = q.question;
            
            const grid = document.getElementById('optGrid');
            grid.innerHTML = "";
            
            q.options.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = "opt-btn";
                btn.innerText = opt;
                btn.onclick = () => checkAnswer(btn, opt, q.correct);
                grid.appendChild(btn);
            });
        }

        function checkAnswer(btn, selected, correct) {
            // Disable all buttons
            const btns = document.querySelectorAll('.opt-btn');
            btns.forEach(b => b.onclick = null);

            if(selected === correct) {
                btn.classList.add('correct');
                score++;
            } else {
                btn.classList.add('wrong');
                // Highlight correct
                btns.forEach(b => {
                    if(b.innerText === correct) b.classList.add('correct');
                });
            }

            setTimeout(() => {
                currentQuestionIndex++;
                if(currentQuestionIndex < 20) {
                    showQuestion();
                } else {
                    showResults();
                }
            }, 1500);
        }

        function showResults() {
            document.getElementById('quizContent').style.display = 'none';
            document.getElementById('resultContent').style.display = 'block';
            
            const percentage = Math.round((score / 20) * 100);
            document.getElementById('finalScore').innerText = `${percentage}%`;
            
            let msg = "";
            if(percentage === 100) msg = "Perfect! You are a slang master! 游녬";
            else if(percentage >= 80) msg = "Awesome job! You know your stuff. 游댠";
            else if(percentage >= 60) msg = "Good effort! Keep practicing. 游녨";
            else msg = "Don't give up! Review the dictionary and try again. 游눩";
            
            document.getElementById('feedbackText').innerText = msg;
        }

    </script>
</body>
</html>